<template>
  <!-- Combined Modal for Lead Event & Opportunity Editor -->
  <template if:true={showModal}>
    <div class="modal-container">
      <section
        role="dialog"
        tabindex="-1"
        aria-labelledby="combined-modal-heading"
        aria-modal="true"
        aria-describedby="combined-modal-content"
        class="slds-modal slds-fade-in-open"
      >
        <div class="slds-modal__container">
          <!-- Modal Header -->
          <header class="slds-modal__header">
            <button
              class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
              title="Fechar"
              onclick={closeModal}
            >
              <lightning-icon
                icon-name="utility:close"
                alternative-text="Fechar"
                size="small"
              ></lightning-icon>
              <span class="slds-assistive-text">Fechar</span>
            </button>
            <h2
              id="combined-modal-heading"
              class="slds-modal__title slds-hyphenate"
            >
              <lightning-icon
                icon-name="utility:success"
                size="small"
                class="slds-m-right_small"
              ></lightning-icon>
              {modalTitle}
            </h2>
            <p class="slds-m-top_x-small">
              Configure os detalhes do compromisso e oportunidade criados automaticamente
            </p>
          </header>

          <!-- Tab Navigation -->
          <div class="slds-tabs_default">
            <ul class="slds-tabs_default__nav" role="tablist">
              <li class="slds-tabs_default__item" role="presentation">
                <button
                  class="slds-tabs_default__link active"
                  type="button"
                  role="tab"
                  data-tab="event"
                  onclick={handleTabChange}
                >
                  <lightning-icon
                    icon-name="standard:event"
                    size="x-small"
                    class="slds-m-right_x-small"
                  ></lightning-icon>
                  Compromisso
                </button>
              </li>
              <li class="slds-tabs_default__item" role="presentation">
                <button
                  class="slds-tabs_default__link"
                  type="button"
                  role="tab"
                  data-tab="opportunity"
                  onclick={handleTabChange}
                >
                  <lightning-icon
                    icon-name="standard:opportunity"
                    size="x-small"
                    class="slds-m-right_x-small"
                  ></lightning-icon>
                  Oportunidade
                </button>
              </li>
            </ul>

            <!-- Modal Body with Tab Content -->
            <div class="slds-modal__content slds-p-around_small" id="combined-modal-content">
              
              <!-- Loading State -->
              <template if:true={isLoading}>
                <div class="slds-is-relative slds-p-around_large">
                  <lightning-spinner
                    alternative-text="Carregando..."
                    variant="brand"
                    size="medium"
                  ></lightning-spinner>
                </div>
              </template>

              <!-- Error State -->
              <template if:true={error}>
                <div class="slds-notify slds-notify_alert slds-alert_error" role="alert">
                  <lightning-icon
                    icon-name="utility:error"
                    size="small"
                    class="slds-m-right_small"
                  ></lightning-icon>
                  <h2>{error}</h2>
                </div>
              </template>

              <!-- Event Tab Content - Replicating appointmentEditor layout -->
              <div
                data-tab-content="event"
                class="tab-content show"
                role="tabpanel"
              >
                <!-- Event Loading State -->
                <template if:true={isLoadingEvent}>
                  <div class="slds-is-relative slds-p-around_small">
                    <lightning-spinner
                      alternative-text="Carregando compromisso..."
                      variant="brand"
                      size="small"
                    ></lightning-spinner>
                  </div>
                </template>

                <!-- Event Form - Following appointmentEditor structure -->
                <template if:false={isLoadingEvent}>
                  <div class="appointment-form">

                      <!-- Contact/Lead Search Section - Replicating appointmentEditor -->
                      <template if:true={hasLeadInfo}>
                        <div class="info-card">
                          <div class="info-card-header">
                            <div class="info-card-title">
                              <lightning-icon
                                icon-name="standard:lead"
                                size="x-small"
                                class="slds-m-right_x-small"
                              ></lightning-icon>
                              Contato/Lead Associado
                            </div>
                          </div>
                          <div class="info-card-content">
                            <div class="contact-info-grid">
                              <div class="contact-info-item">
                                <div class="contact-info-label">Nome</div>
                                <div class="contact-info-value">{leadInfo.Name}</div>
                              </div>
                              <div class="contact-info-item">
                                <div class="contact-info-label">Empresa</div>
                                <div class="contact-info-value">{leadInfo.Company}</div>
                              </div>
                              <div class="contact-info-item">
                                <div class="contact-info-label">Email</div>
                                <div class="contact-info-value">{leadInfo.Email}</div>
                              </div>
                              <div class="contact-info-item">
                                <div class="contact-info-label">Telefone</div>
                                <div class="contact-info-value">{leadInfo.Phone}</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </template>

                      <!-- Detalhes do Compromisso - EXACT appointmentEditor replication -->
                      <div class="section-container">
                        <div class="section-header">
                          <h3 class="section-title">Detalhes do Compromisso</h3>
                        </div>

                        <div class="slds-p-around_small">
                          <div class="slds-form">
                            <div class="slds-grid slds-wrap">
                              <!-- Assunto do Compromisso - Read-only, auto-generated (HIDDEN like appointmentEditor) -->
                              <!-- Subject is auto-generated and shown only in modal header -->

                              <!-- Fase do Evento -->
                              <div class="slds-col slds-size_1-of-2 slds-p-horizontal_small slds-p-bottom_small">
                                <lightning-combobox
                                  label="Fase do Evento"
                                  value={eventData.faseEvento}
                                  options={faseEventoOptions}
                                  name="faseEvento"
                                  onchange={handleEventFieldChange}
                                  placeholder="Selecione a fase..."
                                  variant="standard"
                                >
                                </lightning-combobox>
                              </div>

                              <!-- Produto do Evento - Readonly field linked to Opportunity -->
                              <div class="slds-col slds-size_1-of-2 slds-p-horizontal_small slds-p-bottom_small">
                                <div class="slds-form-element">
                                  <label class="slds-form-element__label">
                                    Produto do Evento
                                  </label>
                                  <div class="slds-form-element__control">
                                    <div class="product-readonly-field">
                                      <div class="product-value-container">
                                        <lightning-icon
                                          icon-name="standard:opportunity"
                                          size="x-small"
                                          class="product-icon"
                                        ></lightning-icon>
                                        <div class="product-content">
                                          <div class="product-value">
                                            {displayProductValue}
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <!-- Tipo de Compromisso - EXACT appointmentEditor cards -->
                              <div class="slds-col slds-size_1-of-1 slds-p-horizontal_small slds-p-bottom_medium">
                                <div class="slds-form-element">
                                  <label class="slds-form-element__label" for="appointment-type">Tipo de Compromisso</label>
                                  <div class="slds-form-element__control">
                                    <div class="cards-carousel-container">
                                      <div class="cards-carousel">
                                        <!-- Card Reunião Presencial -->
                                        <div
                                          class={reuniaoPresencialClass}
                                          data-type="Reunião Presencial"
                                          onclick={handleTypeCardClick}
                                        >
                                          <div class="card-header">
                                            <lightning-icon
                                              icon-name="standard:location"
                                              size="small"
                                              class="slds-m-bottom_x-small"
                                            ></lightning-icon>
                                          </div>
                                          <div class="card-title">Presencial</div>
                                        </div>

                                        <!-- Card Reunião Online -->
                                        <div
                                          class={reuniaoOnlineClass}
                                          data-type="Reunião Online"
                                          onclick={handleTypeCardClick}
                                        >
                                          <div class="card-header">
                                            <lightning-icon
                                              icon-name="standard:video"
                                              size="small"
                                              class="slds-m-bottom_x-small"
                                            ></lightning-icon>
                                          </div>
                                          <div class="card-title">
                                            Reunião Online
                                          </div>
                                        </div>

                                        <!-- Card Ligação Telefônica -->
                                        <div
                                          class={ligacaoTelefonicaClass}
                                          data-type="Ligação Telefônica"
                                          onclick={handleTypeCardClick}
                                        >
                                          <div class="card-header">
                                            <lightning-icon
                                              icon-name="standard:call"
                                              size="small"
                                              class="slds-m-bottom_x-small"
                                            ></lightning-icon>
                                          </div>
                                          <div class="card-title">Por Telefone</div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Sala de Reunião (sempre visível) - EXACT appointmentEditor replication -->
                      <div class="section-container">
                        <div class="section-header">
                          <h3 class="section-title">
                            <lightning-icon
                              icon-name="standard:location"
                              size="x-small"
                              class="slds-m-right_x-small"
                            ></lightning-icon>
                            Sala de Reunião
                          </h3>
                        </div>

                        <div class="slds-p-around_small">
                          <div class="slds-form-element">
                            <div class="slds-form-element__control">
                              <div class="cards-carousel-container">
                                <div class="cards-carousel">
                                  <!-- Card Sala Principal -->
                                  <div
                                    class={salaPrincipalCardClass}
                                    data-value="salaPrincipal"
                                    onclick={handleSalaSelect}
                                  >
                                    <div class="card-row">
                                      <span class="color-dot color-dot-green"></span>
                                      <div class="card-title">
                                        Sala Principal
                                      </div>
                                    </div>
                                  </div>

                                  <!-- Card Sala do Gabriel -->
                                  <div
                                    class={salaGabrielCardClass}
                                    data-value="salaGabriel"
                                    onclick={handleSalaSelect}
                                  >
                                    <div class="card-row">
                                      <span class="color-dot color-dot-blue"></span>
                                      <div class="card-title">
                                        Sala do Gabriel
                                      </div>
                                    </div>
                                  </div>

                                  <!-- Card Outra Localização -->
                                  <div
                                    class={outraSalaCardClass}
                                    data-value="Outra"
                                    onclick={handleSalaSelect}
                                  >
                                    <div class="card-row">
                                      <span class="color-dot color-dot-orange"></span>
                                      <div class="card-title">Outra</div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- Localização (apenas quando "Outra" sala é selecionada) -->
                          <template if:true={isOutraSala}>
                            <div class="slds-m-top_medium">
                              <lightning-input
                                label="Localização"
                                value={eventData.location}
                                name="location"
                                onchange={handleEventFieldChange}
                                required
                                placeholder="Endereço completo"
                              ></lightning-input>
                            </div>
                          </template>
                        </div>
                      </div>

                          <!-- Teams Link Generator Component (apenas para reuniões online) -->
                          <template if:true={isOnlineMeeting}>
                            <c-teams-link-generator
                              subject={eventData.subject}
                              start-date-time={eventData.startDateTime}
                              end-date-time={eventData.endDateTime}
                              participants={selectedParticipants}
                              organizer={currentUserInfo}
                              appointment-type={appointmentType}
                              link-reuniao={linkReuniao}
                              onlinkgenerated={handleTeamsLinkGenerated}
                              onlinkcleared={handleTeamsLinkCleared}
                            ></c-teams-link-generator>
                          </template>
                        </div>
                      </div>

                      <!-- Date/Time fields - VERTICAL layout for utility bar -->
                      <template if:true={showDateTimeFields}>
                        <div class="section-container">
                          <div class="section-header">
                            <h3 class="section-title">
                              <lightning-icon
                                icon-name="utility:clock"
                                size="x-small"
                                class="slds-m-right_x-small"
                              ></lightning-icon>
                              Data e Hora
                            </h3>
                          </div>
                          <div class="slds-p-around_small">
                            <!-- Data e Hora de Início - FULL WIDTH -->
                            <div class="slds-m-bottom_small">
                              <lightning-input
                                type="datetime"
                                label="Data e Hora de Início"
                                value={eventData.startDateTime}
                                name="startDateTime"
                                onchange={handleEventFieldChange}
                                required
                              >
                              </lightning-input>
                            </div>

                            <!-- Data e Hora de Término - FULL WIDTH -->
                            <div class="slds-m-bottom_small">
                              <lightning-input
                                type="datetime"
                                label="Data e Hora de Término"
                                value={eventData.endDateTime}
                                name="endDateTime"
                                onchange={handleEventFieldChange}
                                required
                              >
                              </lightning-input>
                            </div>
                          </div>
                        </div>
                      </template>

                      <!-- Participantes Obrigatórios - EXACT appointmentEditor replication -->
                      <div class="section-container" style="margin-bottom: 6rem; padding-bottom: 2rem;">
                        <div class="section-header">
                          <h3 class="section-title">
                            <lightning-icon
                              icon-name="utility:groups"
                              size="x-small"
                              class="slds-m-right_x-small"
                            ></lightning-icon>
                            Participantes
                          </h3>
                        </div>

                        <div class="slds-p-around_small">
                          <!-- Selected Participants Display - Show above dropdowns -->
                          <template if:true={hasSelectedParticipants}>
                            <div class="selected-participants-section">
                              <div class="selected-participants-header">
                                <h4 class="selected-participants-title">
                                  <lightning-icon
                                    icon-name="utility:user"
                                    size="xx-small"
                                    class="slds-m-right_x-small"
                                  ></lightning-icon>
                                  Participantes selecionados
                                </h4>
                              </div>
                              <div class="selected-participants-display">
                                <c-event-participant-display
                                  gestor-name={selectedGestorName}
                                  lider-comercial-name={selectedLiderComercialName}
                                  sdr-name={selectedSdrName}
                                  display-mode="compact"
                                  max-participants="3"
                                  show-photos="true"
                                  show-roles="true"
                                  custom-class="appointment-participants"
                                ></c-event-participant-display>
                              </div>
                            </div>
                          </template>

                          <!-- Participant Selection Dropdowns - EXACT appointmentEditor layout (VERTICAL) -->
                          <div class="participants-container">
                            <!-- Líder comercial Dropdown - First -->
                            <div class={liderComercialDropdownClass}>
                              <div class="dropdown-label-container">
                                <lightning-icon
                                  icon-name="utility:salesforce1"
                                  size="x-small"
                                  class="dropdown-icon"
                                ></lightning-icon>
                                <span class="dropdown-label">Líder comercial</span>
                              </div>
                              <lightning-combobox
                                name="liderComercial"
                                placeholder="Selecionar líder comercial..."
                                options={commercialManagerUserOptions}
                                value={selectedLiderComercialName}
                                onchange={handleParticipantSelect}
                                variant="standard"
                                class="enhanced-combobox"
                              >
                              </lightning-combobox>
                            </div>

                            <!-- Gestor Dropdown - Second -->
                            <div class={gestorDropdownClass}>
                              <div class="dropdown-label-container">
                                <lightning-icon
                                  icon-name="utility:user"
                                  size="x-small"
                                  class="dropdown-icon"
                                ></lightning-icon>
                                <span class="dropdown-label">Gestor</span>
                              </div>
                              <lightning-combobox
                                name="gestor"
                                placeholder="Selecionar gestor..."
                                options={gestorUserOptions}
                                value={selectedGestorName}
                                onchange={handleParticipantSelect}
                                variant="standard"
                                class="enhanced-combobox"
                              >
                              </lightning-combobox>
                            </div>

                            <!-- SDR Dropdown - Third -->
                            <div class={sdrDropdownClass}>
                              <div class="dropdown-label-container">
                                <lightning-icon
                                  icon-name="utility:lead"
                                  size="x-small"
                                  class="dropdown-icon"
                                ></lightning-icon>
                                <span class="dropdown-label">SDR</span>
                              </div>
                              <lightning-combobox
                                name="sdr"
                                placeholder="Selecionar SDR..."
                                options={sdrUserOptions}
                                value={selectedSdrName}
                                onchange={handleParticipantSelect}
                                variant="standard"
                                class="enhanced-combobox"
                              >
                              </lightning-combobox>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Status da Reunião - HIDDEN (only filled after meeting happens) -->
                      <!-- Campo Status da Reunião ocultado pois só deve ser preenchido após a reunião acontecer -->
                      <!--
                      <div class="section-container" style="margin-bottom: 4rem;">
                        <div class="section-header">
                          <h3 class="section-title">
                            <lightning-icon
                              icon-name="utility:info"
                              size="x-small"
                              class="slds-m-right_x-small"
                            ></lightning-icon>
                            Status da Reunião
                          </h3>
                        </div>
                        <div class="slds-p-around_small">
                          <lightning-combobox
                            label="Status"
                            name="statusReuniao"
                            value={statusReuniao}
                            options={statusOptions}
                            onchange={handleStatusChange}
                            placeholder="Selecione o status..."
                          ></lightning-combobox>
                        </div>
                      </div>
                      -->

                      <!-- Descrição - HIDDEN like appointmentEditor -->
                      <!-- Campo Description ocultado para evitar que o usuário modifique o link da reunião -->
                      <!--
                      <div class="section-container">
                        <div class="section-header">
                          <h3 class="section-title">
                            <lightning-icon
                              icon-name="utility:text"
                              size="x-small"
                              class="slds-m-right_x-small"
                            ></lightning-icon>
                            Descrição
                          </h3>
                        </div>
                        <div class="slds-p-around_medium">
                          <lightning-textarea
                            label="Descrição"
                            name="description"
                            value={eventData.description}
                            onchange={handleEventFieldChange}
                            placeholder="Adicione detalhes sobre o compromisso..."
                            variant="label-hidden"
                          ></lightning-textarea>
                        </div>
                      </div>
                      -->

                    </div>
                  </template>
                </div>

              <!-- Opportunity Tab Content -->
              <div
                data-tab-content="opportunity"
                class="tab-content"
                role="tabpanel"
              >
                  <!-- Opportunity Loading State -->
                  <template if:true={isLoadingOpportunity}>
                    <div class="slds-is-relative slds-p-around_medium">
                      <lightning-spinner
                        alternative-text="Carregando oportunidade..."
                        variant="brand"
                        size="small"
                      ></lightning-spinner>
                    </div>
                  </template>

                  <!-- Opportunity Error State -->
                  <template if:true={opportunityError}>
                    <div class="slds-notify slds-notify_alert slds-alert_error" role="alert">
                      <lightning-icon
                        icon-name="utility:error"
                        size="small"
                        class="slds-m-right_small"
                      ></lightning-icon>
                      <h2>{opportunityError}</h2>
                    </div>
                  </template>

                  <!-- Opportunity Form -->
                  <template if:false={isLoadingOpportunity}>
                    <div class="slds-form" role="list">

                      <!-- Opportunity Basic Info -->
                      <div class="section-container">
                        <div class="section-header">
                          <div class="section-title">
                            <lightning-icon
                              icon-name="standard:opportunity"
                              size="x-small"
                              class="slds-m-right_x-small"
                            ></lightning-icon>
                            Informações da Oportunidade
                          </div>
                        </div>
                        <div class="slds-p-around_medium">

                          <!-- Hidden opportunity name field -->
                          <div class="slds-hide">
                            <lightning-input
                              label="Nome da Oportunidade"
                              name="opportunityName"
                              value={opportunityName}
                              onchange={handleOpportunityFieldChange}
                              required
                              disabled
                            ></lightning-input>
                          </div>

                          <div class="slds-form__row">
                            <div class="slds-form__item slds-size_1-of-2">
                              <lightning-input
                                type="number"
                                label="Valor (R$)"
                                name="opportunityAmount"
                                value={opportunityAmount}
                                onchange={handleOpportunityFieldChange}
                                step="0.01"
                              ></lightning-input>
                            </div>
                            <div class="slds-form__item slds-size_1-of-2">
                              <lightning-input
                                type="date"
                                label="Data de Fechamento"
                                name="opportunityCloseDate"
                                value={opportunityCloseDate}
                                onchange={handleOpportunityFieldChange}
                                required
                              ></lightning-input>
                            </div>
                          </div>

                          <!-- Estágio oculto visualmente, mas mantido no DOM para o JavaScript funcionar -->
                          <div class="slds-hide">
                            <lightning-combobox
                              label="Estágio"
                              name="opportunityStageName"
                              value={opportunityStageName}
                              options={stageOptions}
                              onchange={handleOpportunityFieldChange}
                              required
                            ></lightning-combobox>
                          </div>

                        </div>
                      </div>

                      <!-- Opportunity Type Section -->
                      <div class="section-container">
                        <div class="section-header">
                          <div class="section-title">
                            <lightning-icon
                              icon-name="utility:product"
                              size="x-small"
                              class="slds-m-right_x-small"
                            ></lightning-icon>
                            Tipo de Produto
                          </div>
                        </div>
                        <div class="slds-p-around_medium">
                          <div class="type-card-container vertical-cards">
                            <!-- Card para Liquidação Otimizada -->
                            <div class={liquidacaoOtimizadaClass} data-type="Liquidação Otimizada" onclick={handleOpportunityTypeCardClick}>
                              <div class="type-card-content">
                                <lightning-icon icon-name="utility:money" size="medium"></lightning-icon>
                                <div class="type-card-label">Liquidação Otimizada</div>
                              </div>
                            </div>

                            <!-- Card para Consultoria Societária -->
                            <div class={consultoriaSocietariaClass} data-type="Consultoria Societária" onclick={handleOpportunityTypeCardClick}>
                              <div class="type-card-content">
                                <lightning-icon icon-name="utility:groups" size="medium"></lightning-icon>
                                <div class="type-card-label">Consultoria Societária</div>
                              </div>
                            </div>

                            <!-- Card para Gestão de Patrimônio -->
                            <div class={gestaoPatrimonioClass} data-type="Gestão de Patrimônio" onclick={handleOpportunityTypeCardClick}>
                              <div class="type-card-content">
                                <lightning-icon icon-name="utility:chart" size="medium"></lightning-icon>
                                <div class="type-card-label">Gestão de Patrimônio</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Probability Section -->
                      <div class="section-container">
                        <div class="section-header">
                          <div class="section-title">
                            <lightning-icon
                              icon-name="utility:percent"
                              size="x-small"
                              class="slds-m-right_x-small"
                            ></lightning-icon>
                            Probabilidade da Oportunidade
                          </div>
                        </div>
                        <div class="slds-p-around_medium">
                          <div class="probability-slider-container">
                            <c-range-slider
                              name="opportunityProbability"
                              value={opportunityProbabilityNumericValue}
                              disabled={isLoadingOpportunity}
                              onvaluechange={handleRangeSliderChange}
                            ></c-range-slider>
                          </div>
                        </div>
                      </div>

                      <!-- Description Section -->
                      <div class="section-container">
                        <div class="section-header">
                          <div class="section-title">
                            <lightning-icon
                              icon-name="utility:description"
                              size="x-small"
                              class="slds-m-right_x-small"
                            ></lightning-icon>
                            Descrição
                          </div>
                        </div>
                        <div class="slds-p-around_medium">
                          <!-- Template pills for quick description -->
                          <div class="pills-container">
                            <div class="pills-heading">
                              <lightning-icon
                                icon-name="utility:description"
                                size="x-small"
                                class="slds-m-right_x-small"
                              ></lightning-icon>
                              Adicionar descrição rápida
                            </div>
                            <div class="pills-wrapper">
                              <div class="message-pill" data-value="zero" onclick={handleTemplateCardClick}>
                                0% - Sem chance
                              </div>
                              <div class="message-pill" data-value="treze" onclick={handleTemplateCardClick}>
                                13% - Contato inicial
                              </div>
                              <div class="message-pill" data-value="trintaequatro" onclick={handleTemplateCardClick}>
                                34% - Qualificação
                              </div>
                              <div class="message-pill" data-value="cinquentaecinco" onclick={handleTemplateCardClick}>
                                55% - Proposta aceita
                              </div>
                              <div class="message-pill" data-value="oitentaenove" onclick={handleTemplateCardClick}>
                                89% - Fechamento iminente
                              </div>
                              <div class="message-pill" data-value="cem" onclick={handleTemplateCardClick}>
                                100% - Negócio fechado
                              </div>
                            </div>
                          </div>

                          <lightning-textarea
                            label="Descrição"
                            name="opportunityDescription"
                            value={opportunityDescription}
                            onchange={handleOpportunityFieldChange}
                            placeholder="Adicione informações importantes sobre a oportunidade..."
                          ></lightning-textarea>
                        </div>
                      </div>

                      <!-- Info Box -->
                      <div class="slds-box slds-theme_info slds-theme_alert-texture slds-m-top_medium">
                        <div class="slds-media">
                          <div class="slds-media__figure">
                            <lightning-icon
                              icon-name="utility:info"
                              size="small"
                            ></lightning-icon>
                          </div>
                          <div class="slds-media__body">
                            <p>
                              Esta oportunidade foi criada automaticamente quando
                              o lead foi classificado como "Interessado".
                            </p>
                          </div>
                        </div>
                      </div>

                    </div>
                  </template>
                </div>

            </div>

            <!-- Modal Footer -->
            <footer class="slds-modal__footer">
              <lightning-button
                label="Cancelar"
                onclick={closeModal}
                class="slds-m-right_small"
              ></lightning-button>
              <lightning-button
                label="Salvar Tudo"
                variant="brand"
                onclick={handleSave}
                disabled={isLoading}
              ></lightning-button>
            </footer>

          </div>
        </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
    </div>
  </template>
</template>
