// Teste de permissÃµes na scratch org - comparar com devReino
try {
    System.debug('=== TESTE DE PERMISSÃ•ES - SCRATCH ORG ===');
    
    // Teste 1: Query bÃ¡sica
    List<Event> events = [SELECT Id, Subject FROM Event LIMIT 1];
    System.debug('âœ… Query bÃ¡sica: ' + events.size() + ' eventos');
    
    if (!events.isEmpty()) {
        String eventId = events[0].Id;
        System.debug('ğŸ“… Testando com evento: ' + eventId);
        
        // Teste 2: Query completa como no AppointmentController
        try {
            Event eventToUpdate = [
                SELECT
                    Id,
                    Subject,
                    Location,
                    StartDateTime,
                    EndDateTime,
                    IsAllDayEvent,
                    Description,
                    reuniaoCriada__c,
                    statusReuniao__c,
                    WhoId,
                    WhatId,
                    gestor__c,
                    liderComercial__c,
                    sdr__c,
                    salaReuniao__c,
                    fase_evento__c,
                    produto_evento__c
                FROM Event
                WHERE Id = :eventId
                WITH SECURITY_ENFORCED
                LIMIT 1
            ];
            System.debug('âœ… Query completa funcionou!');
            System.debug('ğŸ“‹ Campos: Subject=' + eventToUpdate.Subject);
            System.debug('ğŸ“‹ reuniaoCriada__c=' + eventToUpdate.reuniaoCriada__c);
            System.debug('ğŸ“‹ statusReuniao__c=' + eventToUpdate.statusReuniao__c);
            System.debug('ğŸ“‹ gestor__c=' + eventToUpdate.gestor__c);
            System.debug('ğŸ“‹ salaReuniao__c=' + eventToUpdate.salaReuniao__c);
            
        } catch (Exception e) {
            System.debug('âŒ Erro na query completa: ' + e.getMessage());
            System.debug('ğŸ” Tipo: ' + e.getTypeName());
            System.debug('ğŸ” Linha: ' + e.getLineNumber());
        }
        
        // Teste 3: Verificar permissÃµes de update
        try {
            if (Schema.sObjectType.Event.isUpdateable()) {
                System.debug('âœ… PermissÃ£o de UPDATE no Event: OK');
            } else {
                System.debug('âŒ PermissÃ£o de UPDATE no Event: NEGADA');
            }
        } catch (Exception e) {
            System.debug('âŒ Erro verificando permissÃµes: ' + e.getMessage());
        }
        
        // Teste 4: Verificar campos especÃ­ficos
        Schema.DescribeSObjectResult eventDescribe = Event.SObjectType.getDescribe();
        Map<String, Schema.SObjectField> fieldMap = eventDescribe.fields.getMap();
        
        List<String> testFields = new List<String>{
            'reuniaoCriada__c', 'statusReuniao__c', 'gestor__c', 
            'liderComercial__c', 'sdr__c', 'salaReuniao__c',
            'fase_evento__c', 'produto_evento__c'
        };
        
        for (String fieldName : testFields) {
            if (fieldMap.containsKey(fieldName)) {
                Schema.DescribeFieldResult fieldDescribe = fieldMap.get(fieldName).getDescribe();
                System.debug('âœ… Campo ' + fieldName + ' - AcessÃ­vel: ' + fieldDescribe.isAccessible() + 
                           ', AtualizÃ¡vel: ' + fieldDescribe.isUpdateable());
            } else {
                System.debug('âŒ Campo ' + fieldName + ' NÃƒO EXISTE');
            }
        }
    }
    
} catch (Exception e) {
    System.debug('âŒ ERRO GERAL: ' + e.getMessage());
    System.debug('ğŸ” Tipo: ' + e.getTypeName());
    System.debug('ğŸ” Linha: ' + e.getLineNumber());
}
